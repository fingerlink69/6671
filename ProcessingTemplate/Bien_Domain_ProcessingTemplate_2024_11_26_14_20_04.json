
[
  {
    "domainClass": "ProcessingTemplate",
    "id": "[Bien_Domain]ACCESS-MGMT.SATS-IAM.GBL.JREST",
    "simpleId": "ACCESS-MGMT.SATS-IAM.GBL.JREST",
    "processingType": "TASK",
    "node": "AnowEngine.Rest.rr",
    "preloadCounter": 0,
    "processingCommand": {
      "headers": "Authorization=${AD_token}\nmediaType=application/json\nrequestDataSource=text\nresponseTimeout=60\n",
      "method": "POST",
      "resultVariableLevel": "SELF",
      "body": "",
      "url": "SATSAccessManagement?Action=${ACTION#}&Role=${MAPPED_ROLE#}&SiteName=${SITENAME#}&UserAccount=${USERACCOUNT#}"
    },
    "keepResourcesOnFailure": false,
    "onHold": false,
    "tags": 
    [
      "SATS-IAM"
    ],
    "preScript": ":PSET &ReqIT_action# = JSON_GET_VALUE(&CAT_ITEM_VARIABLES#, $.order_type)\n:PSET &Action# = GET_VAR(VARA.ORDER.SATS-IAM.V, &ReqIT_action#,1)\n\n:if &Action# = \"ADD\" or \"MODIFY\"\n\n:PSET &UserAccount# = &Requested_For#\n:PSET &SiteName# = JSON_GET_VALUE(&CAT_ITEM_VARIABLES#, $.site_name)\n:PSET &Role# = JSON_GET_VALUE(&CAT_ITEM_VARIABLES#, $.role)\n:SET &ROLE_VAR# = STR_SUBSTITUTE(\"&ROLE#\", ' ', '_')\n:PRINT &ROLE_VAR#\n\n:IF &Role# <> ''\n:  PSET &Mapped_Role# = GET_VAR(VARA.ROLE.SATS-IAM.V, \"&ROLE_VAR#\",\"1\")\n:ELSE\n:  PSET &Mapped_Role#=''\n:ENDIF\n:PSET &ReqIT_action# = JSON_GET_VALUE(&CAT_ITEM_VARIABLES#, $.order_type)\n!: EXIT\n:ELSE\n:PSET &UserAccount# = &Requested_For#\n:PSET &Role# = JSON_GET_VALUE(&CAT_ITEM_VARIABLES#, $.delete_role)\n:IF &Role# <> ''\n:  PSET &Mapped_Role#  = GET_VAR(VARA.ROLE.SATS-IAM.V, \"&ROLE_VAR#\",\"1\")\n:  IF STR_LC(&Role#) <> 'please choose role to delete'\n:    IF &Mapped_Role#  = ''\n:      PSET &MESSAGE# = 'Unsupported Role'\n:      PSET &NOTES#=&MESSAGE#\n:      EXIT 1\n:    ENDIF\n:  ENDIF\n:ELSE\n:  PSET &Mapped_Role#=''\n:ENDIF\n\n!: EXIT\n:endif",
    "highRisk": false,
    "weight": "1",
    "taskType": "REST_WEB_SERVICE_CALL",
    "priority": "0",
    "endpoint": "Ad.SATS-IAM.ep",
    "passBy": false,
    "lazyLoad": false,
    "customFieldValues": {
    },
    "postScript": ":PSET &RET_CODE# = 0\n\n:IF &MESSAGE# = 'Unsupported Role'\n:   PSET &EXT_NOTES# = &MESSAGE#\n:   PSET &NOTES# = &EXT_NOTES#\n:   SET &RET_CODE# = 1\n:   MODIFY_STATE STATUS_TEXT = &MESSAGE#\n:   PUB &EXT_NOTES#, , \"TOP\"\n:   PUB &RET_CODE#, , \"TOP\"\n:   PUB &EXT_NOTES#,, \"TOP\"\n:ELSE\n:   PSET &NOTES# = &EXT_NOTES#\n:   PSET &RET_CODE# = &RET_CODE#\n:   PSET &EXT_NOTES# = &EXT_NOTES#\n:   PUB &RET_CODE#,, \"TOP\"\n:   PUB &EXT_NOTES#,, \"TOP\"\n:   PUB &NOTES#,, \"TOP\"\n:ENDIF\n\n!Workaround for &ASSIGNMENT_GROUP_ORG#\n:S &ASSIGNMENT_GROUP_ORG# = &ASSIGNMENT_GROUP#\n:PUB &ASSIGNMENT_GROUP_ORG#,, \"TOP\"",
    "serverNodeType": "REST_WEB_SERVICE",
    "verboseMode": false,
    "eagerScriptExecution": false,
    "passResourceDependenciesToChildren": false,
    "domain": "Bien_Domain",
    "endpointType": "REST_WEB_SERVICE",
    "autoArchive": false,
    "useScripts": true,
    "sequentialProcessing": false,
    "owner": "jakub.szeliga@infinitedata.com",
    "turnOffDurationEstimation": false,
    "passActionsToChildren": false,
    "designParameters": 
    [
      {
        "domainClass": "DesignParameter",
        "designObjectType": "PROCESSING",
        "saveValueToResource": false,
        "addNewValues": false,
        "defaultValue": "ENCRYPTED::ExEbEQwFCBEMEQkTBQUJDAoRBQUFBRgQCRAPChEKAQoJDBEMBQUNBQUMBRARCgwMCwoBChsFDwobDA0FEQUFERYRExEQBQsKCAwTDBgFEAUbDAkFEQUNERgRExA=",
        "sortOrder": 0,
        "designObjectId": "ACCESS-MGMT.SATS-IAM.GBL.JREST",
        "addUnknownValues": false,
        "name": "AD_token",
        "required": false,
        "domain": "Bien_Domain",
        "allowExpressions": false,
        "editorType": "PASSWORD",
        "evaluateExpressions": false,
        "title": "AD_token"
      },
      {
        "domainClass": "DesignParameter",
        "outputFormat": "JSON",
        "designObjectType": "PROCESSING",
        "saveValueToResource": false,
        "addNewValues": false,
        "sortOrder": 0,
        "designObjectId": "ACCESS-MGMT.SATS-IAM.GBL.JREST",
        "addUnknownValues": false,
        "name": "API_JSON_OUTPUT#",
        "required": false,
        "outputDefinition": {
          "dataPath": "$"
        },
        "domain": "Bien_Domain",
        "allowExpressions": false,
        "editorType": "OUTPUT",
        "evaluateExpressions": false,
        "title": "&API_JSON_OUTPUT#"
      },
      {
        "domainClass": "DesignParameter",
        "outputFormat": "JSON",
        "designObjectType": "PROCESSING",
        "saveValueToResource": false,
        "addNewValues": false,
        "sortOrder": 1,
        "designObjectId": "ACCESS-MGMT.SATS-IAM.GBL.JREST",
        "addUnknownValues": false,
        "name": "EXT_NOTES#",
        "required": false,
        "outputDefinition": {
          "dataPath": ".result"
        },
        "domain": "Bien_Domain",
        "allowExpressions": false,
        "editorType": "OUTPUT",
        "evaluateExpressions": false,
        "title": "&EXT_NOTES#"
      },
      {
        "domainClass": "DesignParameter",
        "outputFormat": "JSON",
        "designObjectType": "PROCESSING",
        "saveValueToResource": false,
        "addNewValues": false,
        "sortOrder": 2,
        "designObjectId": "ACCESS-MGMT.SATS-IAM.GBL.JREST",
        "addUnknownValues": false,
        "name": "RET_CODE#",
        "required": false,
        "outputDefinition": {
          "dataPath": ".ReturnCode"
        },
        "domain": "Bien_Domain",
        "allowExpressions": false,
        "editorType": "OUTPUT",
        "evaluateExpressions": false,
        "title": "&RET_CODE#"
      }
    ]
  }
]